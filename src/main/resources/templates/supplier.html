<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">

<meta http-equiv="X-UA-Compatible" content="IE=EDGE"/>
<META HTTP-EQUIV="pragma" CONTENT="no-cache"/>
<META HTTP-EQUIV="Cache-Control" CONTENT="no-store, must-revalidate"/>
<META HTTP-EQUIV="expires" CONTENT="Wed, 26 Feb 1997 08:21:57 GMT"/>
<META HTTP-EQUIV="expires" CONTENT="0"/>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>东阳光招投标网站</title>
    <!-- import Vue.js -->
    <script src="http://vuejs.org/js/vue.min.js" th:src="@{http://vuejs.org/js/vue.min.js}"></script>
    <!-- import stylesheet -->
    <link href="http://unpkg.com/view-design/dist/styles/iview.css"
          th:src="@{http://unpkg.com/view-design/dist/styles/iview.css}" rel="stylesheet">
    <!-- import iView -->
    <script src="http://unpkg.com/view-design/dist/iview.min.js"
            th:src="@{http://unpkg.com/view-design/dist/iview.min.js}"></script>
</head>
<style scoped>
    .layout {
        border: 1px solid #d7dde4;
        background: #f5f7f9;
        position: relative;
        border-radius: 4px;
        overflow: hidden;
    }

    .layout-logo {
        width: 30%;
        height: 30px;
        border-radius: 3px;
        float: left;
        position: relative;
        top: 15px;
        left: 20px;
    }
    .layout-logo img {
        height: 40px
    }

    .layout-nav {
        float: right;
    }
    .logo-title{
        height: 100%;
        position: absolute;
        bottom: 10px;
        padding-left: 10px;
        color: white;
        font-family: "Helvetica Neue",Helvetica,"PingFang SC","Hiragino Sans GB","Microsoft YaHei","微软雅黑",Arial,sans-serif;
        font-size: 28px;
    }
</style>
<body>
<div id="app">
    <template>
        <div class="layout">
            <Layout>
                <Layout th:include="hender"></Layout>
                <Layout>
                    <Sider hide-trigger :style="{background: '#fff'}" th:include="sider"></Sider>
                    <Layout :style="{padding: '0 24px 24px'}">
                        <Content :style="{padding: '24px', minHeight: '900px', background: '#fff'}">
                            <Row>
                                <i-col span="8">
                                    <i-input search enter-button placeholder="输入搜索关键字" v-model="kayward" @on-search="query"/>
                                </i-col>
                                <i-col span="2" offset="14">
                                    <i-button type="success" @click="modal1 = true">新增</i-button>
                                    <i-button type="error" @click="deleteTable">删除</i-button>
                                </i-col>
                            </Row>
                            <Row style="padding: 10px 0">
                                <i-Table border :loading="loading" ref="selection" :columns="columns1" :data="data1">
                                    <template slot-scope="{ row, index }" slot="action">
                                        <i-button type="primary" size="small" @click="modal2 = true">编辑</i-button>
                                    </template>
                                </i-Table>
                            </Row>
                            <Row>
                                <i-col span="8">
                                    <i-button @click="handleSelectAll(true)">Set all selected</i-button>
                                    <i-button @click="handleSelectAll(false)">Cancel all selected</i-button>
                                </i-col>
                                <i-col span="12" offset="4" style="float: right;">
                                    <Page :total="page_total" show-total show-sizer show-elevator @on-change="page_change" @on-page-size-change="page_size"/>
                                </i-col>
                            </Row>
                        </Content>
                    </Layout>
                </Layout>
            </Layout>
        </div>

        <Modal
                title="新增供应商"
                v-model="modal1"
                :loading="modal1_loading"
                @on-ok="addSupplierEntity('addSupplierEntity')"
                @on-cancel="cancel('addSupplierEntity')"
                ok-text="提交"
                cancel-text="取消">
            <i-Form ref="addSupplierEntity" :model="supplierEntity" :rules="ruleSupplierEntity" :label-width="80">
                <Form-Item label="公司名" prop="companyName">
                    <i-Input type="text" v-model="supplierEntity.companyName"></i-Input>
                </Form-Item>
                <Form-Item label="负责人" prop="principal">
                    <i-Input type="text" v-model="supplierEntity.principal"></i-Input>
                </Form-Item>
                <Form-Item label="联系电话" prop="phoneNumber">
                    <i-Input type="text" v-model="supplierEntity.phoneNumber"></i-Input>
                </Form-Item>
                <Form-Item label="联系地址" prop="address">
                    <i-Input type="text" v-model="supplierEntity.address"></i-Input>
                </Form-Item>
                <Form-Item label="新增帐号" prop="account">
                    <i-Input type="text" v-model="supplierEntity.account"></i-Input>
                </Form-Item>
                <Form-Item label="密码设置" prop="password">
                    <i-Input type="text" v-model="supplierEntity.password"></i-Input>
                </Form-Item>
                <Form-Item label="密码确认" prop="passwordSecond">
                    <i-Input type="text" v-model="supplierEntity.passwordSecond"></i-Input>
                </Form-Item>
            </i-Form>
        </Modal>

        <Modal
                title="编辑供应商"
                v-model="modal2"
                :loading="modal2_loading"
                @on-ok="updateSupplierEntity('updateSupplierEntity')"
                @on-cancel="cancel('updateSupplierEntity')"
                ok-text="提交"
                cancel-text="取消">
            <i-Form ref="updateSupplierEntity" :model="supplierEntity" :label-width="80">
                <Form-Item label="公司名" prop="companyName">
                    <i-Input type="text" readOnly v-model="supplierEntity.companyName"></i-Input>
                </Form-Item>
                <Form-Item label="负责人" prop="principal">
                    <i-Input type="text" v-model="supplierEntity.principal"></i-Input>
                </Form-Item>
                <Form-Item label="联系电话" prop="phoneNumber">
                    <i-Input type="text" v-model="supplierEntity.phoneNumber"></i-Input>
                </Form-Item>
                <Form-Item label="联系地址" prop="address">
                    <i-Input type="text" v-model="supplierEntity.address"></i-Input>
                </Form-Item>
            </i-Form>
        </Modal>
    </template>
</div>
</body>
<script src="../static/js/axios.min.js" th:src="@{../js/axios.min.js}"></script>
<script type="module">
    import menuSelect from '../js/menu_select.js';
    var app = new Vue({
        el: '#app',
        data() {
            return {
                activeName: '1-3',
                kayward: '',
                page: 1,
                page_size: 10,
                page_total: 100,
                loading: false,


                cityList: [
                    {
                        value: 'New York',
                        label: 'New York'
                    },
                    {
                        value: 'London',
                        label: 'London'
                    },
                    {
                        value: 'Sydney',
                        label: 'Sydney'
                    },
                    {
                        value: 'Ottawa',
                        label: 'Ottawa'
                    },
                    {
                        value: 'Paris',
                        label: 'Paris'
                    },
                    {
                        value: 'Canberra',
                        label: 'Canberra'
                    }
                ],
                bidEntity: {

                },
                modal1: false,
                modal1_loading: true,

                modal2: false,
                modal2_loading: true,

                ruleSupplierEntity: {
                    companyName: [
                        { required: true, message: '必须设置公司名', trigger: 'blur' }
                    ],
                    account: [
                        { required: true, message: '必须设置帐号', trigger: 'blur' }
                    ],
                    password: [
                        { required: true, message: '必须设置密码', trigger: 'blur' }
                    ],
                    passwordSecond: [
                        { required: true, message: '必须确认', trigger: 'blur' }
                    ],
                },
                supplierEntity: {},
                columns1: [
                    {
                        type: 'selection',
                        width: 60,
                        align: 'center'
                    },
                    {
                        title: 'Name',
                        key: 'name'
                    },
                    {
                        title: 'Age',
                        key: 'age'
                    },
                    {
                        title: 'Address',
                        key: 'address'
                    },
                    {
                        title: 'Action',
                        slot: 'action',
                        width: 150,
                        align: 'center'
                    }
                ],
                data1: [
                    {
                        name: 'John Brown',
                        age: 18,
                        address: 'New York No. 1 Lake Park',
                        date: '2016-10-03'
                    },
                    {
                        name: 'Jim Green',
                        age: 24,
                        address: 'London No. 1 Lake Park',
                        date: '2016-10-01'
                    },
                    {
                        name: 'Joe Black',
                        age: 30,
                        address: 'Sydney No. 1 Lake Park',
                        date: '2016-10-02'
                    },
                    {
                        name: 'Jon Snow',
                        age: 26,
                        address: 'Ottawa No. 2 Lake Park',
                        date: '2016-10-04'
                    }
                ]
            }
        },
        methods: {
            deleteTable() {
                var selected = this.$refs.selection.getSelection();
                selected = selected.map(item => {
                    return item.name
                });
                console.log(selected)
            },
            handleSelectAll (status) {
                this.$refs.selection.selectAll(status);
            },
            addSupplierEntity (name) {
                this.$refs[name].validate((valid) => {
                    if (valid) {
                        console.log(this.supplierEntity);
                        this.modal1 = false; // 关闭窗口
                        this.$refs[name].resetFields(); // 重置表单
                    } else {
                        this.modal1_loading = false;
                        this.$nextTick(() => {
                            this.modal1_loading = true;
                        });
                    }
                })
            },
            updateSupplierEntity (name) {
                console.log(this.supplierEntity);
                this.modal2 = false; // 关闭窗口
                this.$refs[name].resetFields(); // 重置表单
            },
            cancel (name) {
                this.$refs[name].resetFields();
            },
            page_change (page) {
                console.log(page)
            },
            page_size (size) {
                console.log(size)
            },
            query() {
                console.log(this.kayward)
                // axios.get('/json')
                //     .then(response => (console.log("111   " + response)))
                //     .catch(function (error) { // 请求失败处理
                //         console.log(error);
                //     });
            },
            menu_select(name) {
                menuSelect.menu_select(name)
            }
        }
    });
</script>
</html>
