<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">

<meta http-equiv="X-UA-Compatible" content="IE=EDGE"/>
<META HTTP-EQUIV="pragma" CONTENT="no-cache"/>
<META HTTP-EQUIV="Cache-Control" CONTENT="no-store, must-revalidate"/>
<META HTTP-EQUIV="expires" CONTENT="Wed, 26 Feb 1997 08:21:57 GMT"/>
<META HTTP-EQUIV="expires" CONTENT="0"/>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>东阳光招投标网站</title>
    <!-- import Vue.js -->
    <script src="http://vuejs.org/js/vue.min.js" th:src="@{http://vuejs.org/js/vue.min.js}"></script>
    <!-- import stylesheet -->
    <link href="http://unpkg.com/view-design/dist/styles/iview.css"
          th:src="@{http://unpkg.com/view-design/dist/styles/iview.css}" rel="stylesheet">
    <!-- import iView -->
    <script src="http://unpkg.com/view-design/dist/iview.min.js"
            th:src="@{http://unpkg.com/view-design/dist/iview.min.js}"></script>
</head>
<style scoped>
    .layout {
        border: 1px solid #d7dde4;
        background: #f5f7f9;
        position: relative;
        border-radius: 4px;
        overflow: hidden;
    }

    .layout-logo {
        width: 30%;
        height: 30px;
        border-radius: 3px;
        float: left;
        position: relative;
        top: 15px;
        left: 20px;
    }
    .layout-logo img {
        height: 40px
    }

    .layout-nav {
        float: right;
    }
    .logo-title{
        height: 100%;
        position: absolute;
        bottom: 10px;
        padding-left: 10px;
        color: white;
        font-family: "Helvetica Neue",Helvetica,"PingFang SC","Hiragino Sans GB","Microsoft YaHei","微软雅黑",Arial,sans-serif;
        font-size: 28px;
    }
</style>
<body>
<div id="app">
    <template>
        <div class="layout">
            <Layout>
                <Layout th:include="hender"></Layout>
                <Layout>
                    <Sider hide-trigger :style="{background: '#fff'}" th:include="sider"></Sider>
                    <Layout :style="{padding: '0 24px 24px'}">
                        <Content :style="{padding: '24px', minHeight: '900px', background: '#fff'}">
                            <Row>
                                <i-col span="8">
                                    <i-input search enter-button placeholder="输入搜索关键字" v-model="kayward" @on-search="query"/>
                                </i-col>
                                <i-col span="2" offset="14">
                                    <i-button type="success" @click="modal1 = true">新增</i-button>
                                    <i-button type="error" @click="deleteTable">删除</i-button>
                                </i-col>
                            </Row>
                            <Row style="padding: 10px 0">
                                <i-Table border :loading="loading" ref="selection" :columns="columns1" :data="data1"></i-Table>
                            </Row>
                            <Row>
                                <i-col span="8">
                                    <i-button @click="handleSelectAll(true)">Set all selected</i-button>
                                    <i-button @click="handleSelectAll(false)">Cancel all selected</i-button>
                                </i-col>
                                <i-col span="12" offset="4" style="float: right;">
                                    <Page :total="page_total" show-total show-sizer show-elevator @on-change="page_change" @on-page-size-change="page_size"/>
                                </i-col>
                            </Row>
                        </Content>
                    </Layout>
                </Layout>
            </Layout>
        </div>

        <Modal
                title="新增标书"
                v-model="modal1"
                @on-ok="ok"
                @on-cancel="cancel"
                ok-text="提交"
                cancel-text="取消">
            <i-Form :model="bidEntity" :label-width="80">
                <Form-Item label="标书编号" prop="number">
                    <i-Input type="text" v-model="bidEntity.number"></i-Input>
                </Form-Item>
                <Form-Item label="标名" prop="name">
                    <i-Input type="text" v-model="bidEntity.name"></i-Input>
                </Form-Item>
                <Form-Item label="开标时间" prop="time">
                    <date-picker type="datetime" placeholder="请选择开标时间" v-model="bidEntity.time"></date-picker>
                </Form-Item>
                <Form-Item label="受邀供应商" prop="age">
                    <i-select clearable multiple v-model="bidEntity.supplier">
                        <i-option v-for="item in cityList" :value="item.value" :key="item.value">{{ item.label }}</i-option>
                    </i-select>
                </Form-Item>
            </i-Form>
        </Modal>
    </template>
</div>
</body>
<script src="../static/js/axios.min.js" th:src="@{../js/axios.min.js}"></script>
<script type="module">
    import menuSelect from '../js/menu_select.js';
    var app = new Vue({
        el: '#app',
        data() {
            return {
                activeName: '1-1',
                kayward: '',
                page: 1,
                page_size: 10,
                page_total: 100,
                loading: false,
                cityList: [
                    {
                        value: 'New York',
                        label: 'New York'
                    },
                    {
                        value: 'London',
                        label: 'London'
                    },
                    {
                        value: 'Sydney',
                        label: 'Sydney'
                    },
                    {
                        value: 'Ottawa',
                        label: 'Ottawa'
                    },
                    {
                        value: 'Paris',
                        label: 'Paris'
                    },
                    {
                        value: 'Canberra',
                        label: 'Canberra'
                    }
                ],
                bidEntity: {

                },
                modal1: false,
                columns1: [
                    {
                        type: 'selection',
                        width: 60,
                        align: 'center'
                    },
                    {
                        title: 'Name',
                        key: 'name'
                    },
                    {
                        title: 'Age',
                        key: 'age'
                    },
                    {
                        title: 'Address',
                        key: 'address'
                    }
                ],
                data1: [
                    {
                        name: 'John Brown',
                        age: 18,
                        address: 'New York No. 1 Lake Park',
                        date: '2016-10-03'
                    },
                    {
                        name: 'Jim Green',
                        age: 24,
                        address: 'London No. 1 Lake Park',
                        date: '2016-10-01'
                    },
                    {
                        name: 'Joe Black',
                        age: 30,
                        address: 'Sydney No. 1 Lake Park',
                        date: '2016-10-02'
                    },
                    {
                        name: 'Jon Snow',
                        age: 26,
                        address: 'Ottawa No. 2 Lake Park',
                        date: '2016-10-04'
                    }
                ]
            }
        },
        methods: {
            deleteTable() {
                var selected = this.$refs.selection.getSelection();
                selected = selected.map(item => {
                    return item.name
                });
                console.log(selected)
            },
            handleSelectAll (status) {
                this.$refs.selection.selectAll(status);
            },
            ok () {
                console.log(this.bidEntity)
                this.$Message.info('Clicked ok');
            },
            cancel () {
                this.$Message.info('Clicked cancel');
            },
            page_change (page) {
                console.log(page)
            },
            page_size (size) {
                console.log(size)
            },
            query() {
                console.log(this.kayward)
                // axios.get('/json')
                //     .then(response => (console.log("111   " + response)))
                //     .catch(function (error) { // 请求失败处理
                //         console.log(error);
                //     });
            },
            menu_select(name) {
                menuSelect.menu_select(name)
            }
        }
    });
</script>
</html>
